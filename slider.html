<!DOCTYPE html>
<html lang="en"><head>

  <meta charset="UTF-8">

  <link rel="apple-touch-icon" type="image/png" href="https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png">
  <meta name="apple-mobile-web-app-title" content="CodePen">

  <link rel="shortcut icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">

  <link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-8f3771b1072e3c38bd662872f6b673a722f4b3ca2421637d5596661b4e2132cc.svg" color="#111">


  <title>CodePen - Bouncy Line SVG</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">



  <style>
    body {
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #FFF;
      background: #545c61;
      background: radial-gradient(circle, #545c61 0%, #172930 100%);
    }

    svg {
      width: 90vw;
      height: auto;
      background-color: transparent;
    }

    #control-point {
      cursor: -webkit-grab;
      cursor: grab;
    }

    #control-point:active {
      cursor: -webkit-grabbing;
      cursor: grabbing;
    }

    .coordinates {
      text-align: center;
      display: flex;
      justify-content: center;
      gap: 20px;
      display: none;
    }
  </style>

  <script>
    window.console = window.console || function(t) {};
  </script>



  <script>
    if (document.location.search.match(/type=embed/gi)) {
      window.parent.postMessage("resize", "*");
    }
  </script>


</head>

<body translate="no">
<div>
  <div class="coordinates">
    <div>X:<span class="posX">95.00</span></div>
    <div>Y:<span class="posY">80.00</span></div>
  </div>

  <svg width="190" height="160" viewBox="0 0 190 160" xmlns="http://www.w3.org/2000/svg">
    <path d="M 10 80 Q 95 80 180 80" stroke="white" fill="transparent" id="curve"></path>

    <circle cx="10" cy="80" r="2" fill="white" id="start-point"></circle>
    <circle cx="180" cy="80" r="2" fill="white" id="end-point"></circle>
    <circle cx="95" cy="80" r="5" fill="#FDD835" id="control-point"></circle>
  </svg>
</div>
<script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-1b93190375e9ccc259df3a57c1abc0e64599724ae30d7ea4c6877eb615f89387.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js"></script>
<script id="rendered-js">
  const svg = document.querySelector('svg');
  const curve = document.getElementById('curve');
  const controlPoint = document.getElementById('control-point');
  const posXLabel = document.querySelector('.posX');
  const posYLabel = document.querySelector('.posY');
  const svgViewBoxWidth = 190;

  let isMouseDown = false;
  let point = {
    x: 95,
    y: 80 };


  function updateCurve(x, y) {
    let svgRect = svg.getBoundingClientRect();
    let scale = svgRect.width / svgViewBoxWidth;
    let width = svgRect.width / scale - 5;
    let height = svgRect.height / scale - 6;

    // update point coordinates to mouse/touch position when dragging
    if (x && y) {
      point.x = Math.ceil((x - svgRect.x) / scale);
      point.y = Math.ceil((y - svgRect.y) / scale);
    }

    // clamp the coordinates to the limits of the SVG viewbox
    point.x = point.x < 5 ? 5 : point.x;
    point.y = point.y < 5 ? 5 : point.y;
    point.x = point.x > width ? Math.ceil(width) : point.x;
    point.y = point.y > height ? Math.ceil(height) : point.y;

    // update coordinate labels
    posXLabel.textContent = point.x.toFixed(2);
    posYLabel.textContent = point.y.toFixed(2);

    // update coordinates for control point and curve
    controlPoint.setAttribute('cx', point.x);
    controlPoint.setAttribute('cy', point.y);
    curve.setAttribute('d', curve.getAttribute('d').replace(/Q (\d+(\.\d+)?) (\d+(\.\d+)?)/, `Q ${point.x} ${point.y}`));
  }

  function onMouseDown() {
    isMouseDown = true;
  }

  function onMouseMove(ev) {
    if (isMouseDown) {
      updateCurve(ev.clientX, ev.clientY);
    }
  }

  function onMouseUp() {
    isMouseDown = false;

    // animate the control point and curve back to
    // the initial positions with a bouncy effect
    // using the anime.js animation library
    anime({
      targets: point,
      x: 95, // target X coordinate
      y: 80, // target Y coordinate
      duration: 1000,
      easing: 'easeOutElastic(1.5, 0.2)',
      update: function () {
        updateCurve();
      } });

  }

  controlPoint.addEventListener('mousedown', onMouseDown);
  controlPoint.addEventListener('touchstart', onMouseDown);

  document.addEventListener('mousemove', onMouseMove);
  document.addEventListener('touchmove', ev => {
    updateCurve(ev.touches[0].clientX, ev.touches[0].clientY);
  });

  document.addEventListener('mouseup', onMouseUp);
  document.addEventListener('touchend', onMouseUp);
  //# sourceURL=pen.js
</script>







</body></html>